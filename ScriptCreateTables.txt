CREATE TABLE TBVendedor (CPF VARCHAR(11) NOT NULL, Nome VARCHAR(40) NOT NULL,
Endereco VARCHAR(80), Cidade VARCHAR(20), CEP VARCHAR(9), UF VARCHAR(2),
TelefoneDDD VARCHAR(3), TelefoneNumero VARCHAR(11), SalarioBase NUMBER(*,2),
Comissao NUMBER(*,2));

CREATE TABLE TBCliente (CPF VARCHAR(11) NOT NULL, Nome VARCHAR(40) NOT NULL,
Endereco VARCHAR(80), Cidade VARCHAR(20), CEP VARCHAR(9), UF VARCHAR(2),
TelefoneDDD VARCHAR(3), TelefoneNumero VARCHAR(11), LimiteCredito NUMBER(*,2),
LimiteDisponivel NUMBER(*,2));

CREATE TABLE TBPRODUTO (CodigoProduto INT NOT NULL, Descricao VARCHAR(40),
QtdeDisponivel INT, PrecoUnit NUMBER(*,2), EstoqueMinimo INT);

CREATE TABLE TBPedido (Numero INT NOT NULL, CPFCliente VARCHAR(14), CPFVendedor VARCHAR(14),
Status CHAR CHECK (Status IN (0,1)), DataPedido DATE, DataPagto DATE);

CREATE TABLE TBItemPedido (NumeroPedido INT NOT NULL, CodigoProduto INT NOT NULL, QtdeVendida INT);

ALTER TABLE TBVendedor
ADD CONSTRAINT PK_TBVendedor PRIMARY KEY(CPF);

ALTER TABLE TBCliente
ADD CONSTRAINT PK_TBCliente PRIMARY KEY(CPF);

ALTER TABLE TBPRODUTO
ADD CONSTRAINT PK_TBProduto PRIMARY KEY(CodigoProduto);

ALTER TABLE TBPEDIDO
ADD CONSTRAINT PK_TBPedido PRIMARY KEY(Numero);

ALTER TABLE TBPEDIDO
ADD CONSTRAINT FK_TBPedido_TBCliente FOREIGN KEY(CPFCLiente) REFERENCES TBCliente(CPF);

ALTER TABLE TBPedido
ADD CONSTRAINT FK_TBPedido_TBVendedor FOREIGN KEY(CPFVendedor) REFERENCES TBVendedor(CPF);

ALTER TABLE TBItemPedido
ADD CONSTRAINT PK_TBItemPedido PRIMARY KEY(NumeroPedido,CodigoProduto);

ALTER TABLE TBItemPedido
ADD CONSTRAINT FK_TBItemPedido_TBProduto FOREIGN KEY(CodigoProduto) REFERENCES TBProduto(CodigoProduto);

ALTER TABLE TBItemPedido
ADD CONSTRAINT FK_TBItemPedido_TBPedido FOREIGN KEY(NumeroPedido) REFERENCES TBPedido(Numero);

SELECT * FROM TBPRODUTO;
SELECT * FROM TBPEDIDO;
SELECT * FROM TBITEMPEDIDO;
SELECT CPF, LIMITEDISPONIVEL, CodigoProduto, QtdeDisponivel FROM TBCLIENTE, TBPRODUTO;

DELETE FROM TBPEDIDO WHERE NUMERO > 0;
DELETE FROM TBITEMPEDIDO WHERE NUMEROPEDIDO > 0;
DROP TABLE TBVENDEDOR;
DROP TABLE TBITEMPEDIDO;
DROP TABLE TBPEDIDO;
DROP TABLE TBCLIENTE;
DROP TABLE TBPRODUTO;
